{% extends "base.html" %}
{% load static %}

{% block title %}{{ profile.name }} – Profile{% endblock %}

{% block extra_head %}
<style>
/* ----------  GLOBAL TOKENS (copied from skills.html)  ---------- */
:root{
  --skill-primary:#2563eb;
  --skill-accent:#e11d48;
  --skill-dark:#0f172a;
  --skill-light:#f8fafc;
  --skill-gray:#64748b;
  --skill-light-gray:#e2e8f0;
  --skill-radius:12px;
  --skill-shadow:0 4px 20px rgba(0,0,0,.08);
  --skill-transition:all .3s ease;
  --font-skill:'Inter','Segoe UI',Tahoma,Geneva,Verdana,sans-serif;
}

/* ----------  RESET / BASE  ---------- */
.profile-wrapper *,
.profile-wrapper *::before,
.profile-wrapper *::after{
  margin:0;
  padding:0;
  box-sizing:border-box;
}
.profile-wrapper{
  max-width:1200px;
  margin:0 auto;
  padding:20px;
  font-family:var(--font-skill);
  color:var(--skill-dark);
  line-height:1.65;
}

/* ----------  SECTION TITLE  ---------- */
.section-title{
  font-size:2rem;
  font-weight:600;
  margin-bottom:25px;
  position:relative;
  display:inline-block;
}
.section-title::after{
  content:'';
  position:absolute;
  bottom:-6px;
  left:0;
  width:70px;
  height:4px;
  background:linear-gradient(90deg,var(--skill-primary),var(--skill-accent));
  border-radius:2px;
}

/* ----------  CARD GRID  ---------- */
.card-grid{
  display:grid;
  gap:30px;
  grid-template-columns:repeat(auto-fit,minmax(320px,1fr));
}

/* ----------  UNIVERSAL CARD  ---------- */
.card{
  background:#fff;
  border-radius:var(--skill-radius);
  padding:30px;
  box-shadow:var(--skill-shadow);
  transition:var(--skill-transition);
}
.card:hover{
  transform:translateY(-8px);
  box-shadow:0 10px 30px rgba(0,0,0,.12);
}

/* ----------  HERO (unchanged styling)  ---------- */
.hero{
  background:linear-gradient(135deg,var(--skill-primary),var(--skill-accent));
  color:#fff;
  padding:80px 0;
  text-align:center;
  margin-bottom:60px;
}
.hero h1{
  font-size:clamp(2rem,5vw,3.5rem);
  margin-bottom:.5em;
  font-weight:800;
}
.hero p{
  font-size:clamp(1rem,2.5vw,1.4rem);
  max-width:800px;
  margin:0 auto 2rem;
  opacity:.9;
}

/* ----------  PROFILE PICTURE / ABOUT ME (kept as-is)  ---------- */
.profile-section{
  display:grid;
  grid-template-columns:repeat(auto-fit,minmax(300px,1fr));
  gap:40px;
  margin-bottom:60px;
}
.profile-card{
  background:#fff;
  border-radius:var(--skill-radius);
  padding:30px;
  box-shadow:var(--skill-shadow);
  transition:var(--skill-transition);
}
.profile-card:hover {
  transform:translateY(-8px);
  box-shadow:0 10px 30px rgba(0,0,0,.12);
}
.profile-header{
  display:flex;
  gap:30px;
  align-items:center;
  flex-wrap:wrap;
}
.profile-photo{
  position:relative;
  width:150px;
  height:150px;
  border-radius:50%;
  overflow:hidden;
  border:4px solid var(--skill-light);
  box-shadow:var(--skill-shadow);
}
.profile-photo img{
  position:absolute;
  top:0;
  left:0;
  width:100%;
  height:100%;
  object-fit:cover;
}
.profile-info h2{
  font-size:2.2rem;
  margin-bottom:.25em;
  color:var(--skill-dark);
}
.profile-info p{
  color:var(--skill-gray);
}
.contact-details{
  display:grid;
  grid-template-columns:repeat(auto-fit,minmax(200px,1fr));
  gap:15px;
  margin-top: 20px;
}
.contact-item{
  display:flex;
  align-items:center;
  gap:10px;
}
.contact-icon{
  width:40px;
  height:40px;
  background:var(--skill-light);
  border-radius:50%;
  display:flex;
  align-items:center;
  justify-content:center;
  color:var(--skill-primary);
}

/* ----------  ITEMS (education, experience, etc.) - Updated to match skills.html  ---------- */
.item-list {
  display: grid;
  gap: 25px;
}
.item-list article{
  background:#fff;
  border-radius:var(--skill-radius);
  padding:25px 30px;
  box-shadow:var(--skill-shadow);
  transition:var(--skill-transition);
  display: flex;
  flex-direction: column;
  gap: 15px;
}
.item-list article:hover{
  transform:translateY(-4px);
  box-shadow:0 6px 20px rgba(0,0,0,.1);
}
.item-list h4{
  font-size:1.4rem;
  color:var(--skill-primary);
  margin-bottom: 0;
}
.item-list .meta{
  display:flex;
  gap:20px;
  flex-wrap:wrap;
  font-size:.9em;
  color:var(--skill-gray);
  margin-bottom: 0;
}
.item-list .meta span{
  display:flex;
  align-items:center;
  gap:6px;
}
.tag-list{
  display:flex;
  flex-wrap:wrap;
  gap:6px;
  margin-top: 0;
}
.tag{
  font-size:.75rem;
  background:var(--skill-light-gray);
  color:var(--skill-dark);
  padding:4px 10px;
  border-radius:20px;
}

/* ----------  PHILOSOPHY QUOTES - Updated to card style  ---------- */
.philosophy-grid {
  display: grid;
  gap: 25px;
}
.philosophy-card {
  background:#fff;
  border-radius:var(--skill-radius);
  padding:25px 30px;
  box-shadow:var(--skill-shadow);
  transition:var(--skill-transition);
  border-left: 4px solid var(--skill-primary);
  position: relative;
}
.philosophy-card:hover {
  transform: translateY(-4px);
  box-shadow: 0 6px 20px rgba(0,0,0,.1);
}
.philosophy-card::before{
  content:'"';
  font-size:4rem;
  position:absolute;
  top:10px;
  left:10px;
  color:#cbd5e1;
  font-family:Georgia,serif;
  line-height: 1;
}
.philosophy-card p {
  padding-left: 30px;
  font-style: italic;
  margin-bottom: 0;
}

/* ----------  CTA BUTTONS  ---------- */
.cta-buttons{
  display:flex;
  gap:15px;
  flex-wrap:wrap;
  margin-top:40px;
}
.cta-buttons .btn{
  padding:12px 28px;
  border-radius:30px;
  font-weight:600;
  text-decoration:none;
  transition:var(--skill-transition);
  display: inline-block;
  text-align: center;
}
.btn-primary{
  background:var(--skill-primary);
  color:#fff;
  border: none;
}
.btn-primary:hover{
  background:var(--skill-accent);
  transform: translateY(-2px);
}
.btn-outline{
  border:2px solid var(--skill-primary);
  color:var(--skill-primary);
  background:transparent;
}
.btn-outline:hover{
  background:var(--skill-primary);
  color:#fff;
  transform: translateY(-2px);
}

/* ----------  RESPONSIVE  ---------- */
@media (max-width:600px){
  .section-title{font-size:1.6rem;}
  .cta-buttons{justify-content:center;}
  .profile-header {
    justify-content: center;
    text-align: center;
  }
  .contact-details {
    grid-template-columns: 1fr;
  }
}
</style>
{% endblock %}

{# =========  PAGE CONTENT  ========= #}
{% block main %}
<div class="profile-wrapper">

  <!-- Hero -->
  <section class="hero" aria-labelledby="hero-title">
    <div class="container">
      <h1 id="hero-title">Professional Profile</h1>
      <p>{{ profile.title }} with {{ profile.experience_years_display }}</p>
    </div>
  </section>

  <!-- Personal block (photo + about) – untouched layout -->
  <section class="profile-section" aria-labelledby="personal-heading">
    <div class="profile-card">
      <h2 id="personal-heading" class="sr-only">Personal Information</h2>
      <div class="profile-header">
        <figure class="profile-photo">
          {% if profile.profile_picture %}
            <img src="{{ profile.profile_picture.url }}" alt="{{ profile.name }} profile picture" loading="lazy">
          {% else %}
            <img src="https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&h=400&q=80" alt="{{ profile.name }} default avatar" loading="lazy">
          {% endif %}
        </figure>

        <div class="profile-info">
          <h2>{{ profile.name }}</h2>
          <p>{{ profile.title }}</p>
        </div>
      </div>

      <ul class="contact-details" role="list">
        {% for detail in profile.contact_details.all %}
          <li class="contact-item">
            <span class="contact-icon" aria-hidden="true"><i class="{{ detail.icon_class }}"></i></span>
            <div>
              <span class="visually-hidden">{{ detail.get_detail_type_display }}:</span>
              <span>{{ detail.value }}</span>
            </div>
          </li>
        {% endfor %}
      </ul>
    </div>

    <div class="profile-card">
      <h2 class="section-title">About Me</h2>
      <p>{{ profile.about_me|linebreaks }}</p>
    </div>
  </section>

  <!-- Education -->
  <section aria-labelledby="education-heading">
    <h2 class="section-title" id="education-heading">Education</h2>
    <div class="item-list">
      {% for edu in profile.educations.all %}
        <article>
          <h4>{{ edu.degree }}{% if edu.field_of_study %} in {{ edu.field_of_study }}{% endif %}</h4>
          <div class="meta">
            <span><i class="fas fa-university" aria-hidden="true"></i> {{ edu.institution }}</span>
            <span><i class="far fa-calendar-alt" aria-hidden="true"></i> {{ edu.start_date|date:"Y" }} – {% if edu.end_date %}{{ edu.end_date|date:"Y" }}{% else %}Present{% endif %}</span>
          </div>
          <p>{{ edu.description|linebreaks }}</p>
        </article>
      {% endfor %}
    </div>
  </section>

  <!-- Professional Experience -->
  <section aria-labelledby="experience-heading">
    <h2 class="section-title" id="experience-heading">Professional Experience</h2>
    <div class="item-list">
      {% for exp in profile.experiences.all %}
        <article>
          <h4>{{ exp.position }}</h4>
          <div class="meta">
            <span><i class="fas fa-building" aria-hidden="true"></i> {{ exp.company }}</span>
            <span><i class="far fa-calendar-alt" aria-hidden="true"></i> {{ exp.start_date|date:"M Y" }} – {% if exp.end_date %}{{ exp.end_date|date:"M Y" }}{% else %}Present{% endif %}</span>
          </div>
          <p>{{ exp.description|linebreaks }}</p>
          {% if exp.technologies %}
            <div class="tag-list">
              {% for tech in exp.technologies.splitlines %}
                {% if tech %}<span class="tag">{{ tech }}</span>{% endif %}
              {% endfor %}
            </div>
          {% endif %}
        </article>
      {% endfor %}
    </div>
  </section>

  <!-- Background & Interests -->
  <section aria-labelledby="interests-heading">
    <h2 class="section-title" id="interests-heading">Background & Interests</h2>
    <div class="card-grid">
      {% for item in profile.background_interests.all %}
        <div class="card">
          <h4>{{ item.get_category_display }}</h4>
          <ul>
            {% for bullet in item.description.splitlines %}
              {% if bullet %}<li>{{ bullet }}</li>{% endif %}
            {% endfor %}
          </ul>
        </div>
      {% endfor %}
    </div>
  </section>

  <!-- Philosophy -->
  <section aria-labelledby="philosophy-heading">
    <h2 class="section-title" id="philosophy-heading">Professional Philosophy</h2>
    <div class="philosophy-grid">
      {% for phil in profile.philosophies.all %}
        <div class="philosophy-card">
          <p>{{ phil.quote }}</p>
        </div>
      {% endfor %}
    </div>

    <nav class="cta-buttons" aria-label="Call to action">
      <a class="btn btn-primary" href="{% url 'projects' %}">View My Projects</a>
      <a class="btn btn-outline" href="{% url 'contact' %}">Get In Touch</a>
    </nav>
  </section>

</div>
{% endblock %}